<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      body {
        margin: 0;
      }

      .test {
        display: block;
        position: fixed;
        z-index: 200;
        padding: 20px;
        font-size: 40px;
        font-family: "Trebuchet MS", sans-serif;
      }

      .Pcultural {
        color: rgb(128, 189, 255);
      }
      .Pnatural {
        color: rgb(42, 245, 48);
      }
      .Pmixed {
        color: rgb(246, 250, 32);
      }
      .Pmixed,
      .Pcultural,
      .Pnatural:hover {
        cursor: pointer;
      }
    </style>
    <script src="//unpkg.com/globe.gl"></script>
  </head>
  <body>
    <div class="test">
      <p onclick="culturalClick()" class="Pcultural">• Cultural</p>
      <p onclick="naturalClick()" class="Pnatural">• Natural</p>
      <p onclick="mixedClick()" class="Pmixed">• Mixed</p>
    </div>

    <div id="globeViz"></div>

    <script>
      let category;
      let i;

      //Fichier jsnon contenant toutes les infos
      fetch("datasets/real_planet_unesco.json")
        .then((res) => res.json())
        .then((places) => {
          //Initialisation globe
          const globeInstance = Globe()
            //Image globe
            .globeImageUrl(
              "//unpkg.com/three-globe/example/img/earth-night.jpg"
            )
            //Image espace
            .backgroundImageUrl(
              "//unpkg.com/three-globe/example/img/night-sky.png"
            )
            .labelsData(places)
            //Positions
            .labelLat((d) => d.latitude)
            .labelLng((d) => d.longitude)
            //Noms
            .labelText((d) => d.name_en)
            .labelSize(0.03)
            //Taille et couleur des points
            .labelDotRadius(0.21)
            //Couleur différente pour chaque category
            .labelColor((d) => {
              if (d.category == "Cultural") {
                return "rgb(128, 189, 255)";
              } else if (d.category == "Natural") {
                return "rgb(42, 245, 48)";
              } else if (d.category == "Mixed") {
                return "rgb(246, 250, 32)";
              }
            })
            .labelResolution(2)(document.getElementById("globeViz"));

          //Ouvre la page web unesco au click du point
          globeInstance.onLabelClick((label, event, coords) => {
            window.open(label.link, "_blank");
          });

          globeinstance.OnlabelRightClick;
          globeInstance.pointOfView({ lat: 47, lng: 18, altitude: 1 }, 8000);

          globeInstance.onZoom((lat, lng, altitude) => {
            let cameraPosition = globeInstance.pointOfView();
            let alt = cameraPosition.altitude;

            console.log(alt);
          });

          //Choix de catégorie
          function culturalClick() {
            category = "Cultural";
          }
          function naturalClick() {
            category = "Natural";
          }
          function mixedClick() {
            category = "Mixed";
          }
        });
    </script>
  </body>
</html>
